# 5장 쉘과 명령어 사용

## 목차
1.  [쉘 소개](#shell-intro)
2.  [쉘의 기능](#shell-functions)
3.  [전면 처리와 후면 처리](#foreground-background)
4.  [입출력 재지정](#io-redirection)
5.  [여러 개 명령어 실행](#multiple-commands)
6.  [파일 이름 대치와 명령어 대치](#substitution)
7.  [핵심 개념 요약](#summary)

---

## <a id="shell-intro"></a>1. 쉘 소개

*   **쉘(Shell)이란?**
    *   사용자와 운영체제(커널) 사이의 인터페이스 역할.
    *   명령어 처리기(Command Processor): 사용자 명령을 해석하고 실행.
*   **쉘의 종류**:
    *   Bourne Shell (`sh`), Korn Shell (`ksh`), C Shell (`csh`), **Bash** (`bash` - 가장 널리 사용됨), `tcsh` 등.
    *   각 쉘은 고유한 실행 파일 경로를 가짐 (예: `/bin/bash`).
*   **로그인 쉘**:
    *   사용자 로그인 시 자동으로 실행되는 쉘.
    *   `/etc/passwd` 파일에 사용자별로 지정됨.
    *   `chsh` 명령어로 변경 가능 (로그아웃 후 재로그인 시 적용).

---

## <a id="shell-functions"></a>2. 쉘의 기능

*   **주요 기능**:
    *   **명령어 처리**: 명령어 해석 및 프로그램 실행.
    *   **시작 파일**: 쉘 시작 시 환경 설정 파일 자동 실행 (예: `~/.bashrc`, `~/.bash_profile`). 시스템 전체 설정은 `/etc/profile` 등.
    *   **환경 변수**: 쉘과 자식 프로세스에서 공유되는 설정 값 (예: `PATH`, `HOME`).
        *   설정: `변수명=값`, `export 변수명` (환경 변수로 만들기)
        *   확인: `env`, `echo $변수명`
    *   **쉘 스크립트**: 명령어들을 파일에 저장하여 자동화.
    *   **기타**: 파이프, 리다이렉션, 작업 제어, 대치 등.

---

## <a id="foreground-background"></a>3. 전면 처리와 후면 처리

*   **전면 처리 (Foreground)**:
    *   기본 실행 방식.
    *   명령 실행 중에는 쉘이 대기 상태가 되어 다른 명령 입력 불가.
*   **후면 처리 (Background)**:
    *   명령어 뒤에 `&`를 붙여 실행.
    *   쉘은 즉시 프롬프트를 반환하여 다른 작업 가능.
    *   시간이 오래 걸리는 작업에 유용.
*   **작업 제어**:
    *   `jobs`: 백그라운드 작업 목록 확인.
    *   `fg %작업번호`: 백그라운드 작업을 포그라운드로 전환.
    *   `bg %작업번호`: 멈춘(Stopped) 작업을 백그라운드에서 계속 실행.
    *   `Ctrl+Z`: 현재 포그라운드 작업을 일시 정지 (Stopped) 상태로 만듦.

---

## <a id="io-redirection"></a>4. 입출력 재지정

*   명령어의 표준 입력(stdin), 표준 출력(stdout), 표준 오류(stderr)의 경로를 변경하는 기능.
*   **주요 기호**:
    *   `>` (출력 재지정): 표준 출력을 파일로 저장 (덮어쓰기). 예: `ls -l > file.txt`
    *   `>>` (출력 추가): 표준 출력을 파일 끝에 추가. 예: `date >> log.txt`
    *   `<` (입력 재지정): 파일 내용을 표준 입력으로 사용. 예: `wc < file.txt`
    *   `<< 구분자` (Here Document): '구분자'까지의 내용을 표준 입력으로 사용.
    *   `2>` (오류 재지정): 표준 오류를 파일로 저장 (덮어쓰기). 예: `grep xyz file.txt 2> error.log`
    *   `&>` 또는 `> file 2>&1`: 표준 출력과 표준 오류 모두 파일로 저장.
*   **파이프 (`|`)**:
    *   한 명령어의 표준 출력을 다음 명령어의 표준 입력으로 연결.
    *   명령어들을 조합하여 복잡한 작업 수행. 예: `ps aux | grep httpd`

---

## <a id="multiple-commands"></a>5. 여러 개 명령어 실행

*   한 줄에서 여러 명령어를 실행하는 방법.
*   **명령어 구분**:
    *   `;` (순차 실행): 앞 명령어 성공 여부와 관계없이 순서대로 실행. 예: `date; pwd; ls`
    *   `&&` (Conditional AND): 앞 명령어가 **성공**하면 다음 명령어 실행. 예: `gcc main.c && ./a.out`
    *   `||` (Conditional OR): 앞 명령어가 **실패**하면 다음 명령어 실행. 예: `mkdir data || echo "Failed"`
    *   `(명령어들)` (그룹 실행): 명령어들을 그룹으로 묶어 실행 (보통 서브쉘). 입출력 재지정을 그룹 전체에 적용 가능. 예: `(date; who) > output.txt`

---

## <a id="substitution"></a>6. 파일 이름 대치와 명령어 대치

*   **파일 이름 대치 (Globbing / Wildcards)**:
    *   쉘이 특수 문자(와일드카드)를 해당하는 파일 이름 목록으로 확장.
    *   `*`: 0개 이상 임의 문자열. 예: `ls *.txt`
    *   `?`: 1개의 임의 문자. 예: `ls file?.log`
    *   `[...]`: 괄호 안의 문자 중 하나. 예: `ls [abc]*.dat`
*   **명령어 대치 (Command Substitution)**:
    *   명령어 실행 결과를 문자열로 바꿔 다른 명령어의 일부로 사용.
    *   `$(명령어)` (권장) 또는 `` `명령어` ``. 예: `echo "Today is $(date)"`
*   **따옴표 (Quoting)**:
    *   쉘의 특수 문자 해석(대치, 확장) 기능을 제어.
    *   `''` (작은따옴표): 내부 모든 문자를 글자 그대로 취급 (모든 대치 방지).
    *   `""` (큰따옴표): 변수(`$`), 명령어 대치(`` ` ``, `$()`)는 허용, 파일 이름 대치(`*?[]`), 단어 분리는 방지.
    *   `\` (역슬래시): 바로 뒤 한 문자의 특수 의미 제거 (Escape).

---

## <a id="summary"></a>7. 핵심 개념 요약

*   **쉘**: 사용자와 OS 커널 사이의 명령어 인터페이스.
*   **입출력 재지정**: 명령어의 입/출력/오류 대상을 파일 등으로 변경 (`>`, `>>`, `<`, `2>`).
*   **파이프 (`|`)**: 명령어 간 표준 출력/입력 연결.
*   **작업 제어**: 백그라운드 실행 (`&`), 상태 확인 (`jobs`), 전환 (`fg`, `bg`).
*   **대치**: 와일드카드 확장 (`*?[]`), 명령어 결과 삽입 (`$()`, `` ` ` ``).
*   **따옴표**: 특수 문자 해석 제어 (`''`, `""`, `\`).
